# Internationalization (i18n) Guide

## üåç Overview

Strandly supports multiple languages to serve the diverse European market. Our i18n implementation uses `next-intl` for robust translation management and locale-based routing.

## üéØ Supported Languages

### Current Languages
- **English (en)** - Default language
- **German (de)** - Primary European market
- **French (fr)** - Future expansion

### Future Languages
- **Spanish (es)** - Southern European market
- **Italian (it)** - Italian market
- **Dutch (nl)** - Benelux region
- **Polish (pl)** - Eastern European market

## üèóÔ∏è Architecture

### File Structure
```
i18n/
‚îú‚îÄ‚îÄ config.ts              # i18n configuration
‚îú‚îÄ‚îÄ en.json                # English translations
‚îú‚îÄ‚îÄ de.json                # German translations
‚îú‚îÄ‚îÄ fr.json                # French translations
‚îî‚îÄ‚îÄ middleware.ts          # Locale detection middleware
```

### Next.js Integration
```
app/
‚îú‚îÄ‚îÄ [locale]/              # Locale-based routing
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # Homepage
‚îÇ   ‚îú‚îÄ‚îÄ about/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx       # About page
‚îÇ   ‚îî‚îÄ‚îÄ blog/
‚îÇ       ‚îî‚îÄ‚îÄ page.tsx       # Blog listing
‚îú‚îÄ‚îÄ globals.css
‚îî‚îÄ‚îÄ layout.tsx
```

## ‚öôÔ∏è Configuration

### i18n Config
```typescript
// i18n/config.ts
import { notFound } from 'next/navigation';
import { getRequestConfig } from 'next-intl/server';

export const locales = ['en', 'de', 'fr'] as const;
export type Locale = (typeof locales)[number];

export default getRequestConfig(async ({ locale }) => {
  // Validate that the incoming `locale` parameter is valid
  if (!locales.includes(locale as any)) notFound();

  return {
    messages: (await import(`./${locale}.json`)).default,
    timeZone: 'Europe/Berlin',
    now: new Date(),
  };
});
```

### Middleware Configuration
```typescript
// middleware.ts
import createMiddleware from 'next-intl/middleware';
import { locales } from './i18n/config';

export default createMiddleware({
  // A list of all locales that are supported
  locales,
  
  // Used when no locale matches
  defaultLocale: 'en',
  
  // Don't add a locale prefix for the default locale
  localePrefix: 'as-needed',
  
  // Redirect to locale-specific URLs
  localeDetection: true,
});

export const config = {
  // Match only internationalized pathnames
  matcher: ['/', '/(de|fr)/:path*']
};
```

## üìù Translation Files

### English (en.json)
```json
{
  "common": {
    "loading": "Loading...",
    "error": "Something went wrong",
    "retry": "Try again",
    "cancel": "Cancel",
    "save": "Save",
    "delete": "Delete",
    "edit": "Edit",
    "close": "Close",
    "back": "Back",
    "next": "Next",
    "previous": "Previous",
    "search": "Search",
    "filter": "Filter",
    "sort": "Sort",
    "clear": "Clear",
    "apply": "Apply",
    "confirm": "Confirm",
    "yes": "Yes",
    "no": "No"
  },
  "navigation": {
    "home": "Home",
    "about": "About",
    "stylists": "Find Stylists",
    "bookings": "My Bookings",
    "shop": "Shop",
    "blog": "Blog",
    "contact": "Contact",
    "profile": "Profile",
    "settings": "Settings",
    "logout": "Logout"
  },
  "home": {
    "hero_title": "Find Your Perfect Afro Hair Stylist",
    "hero_subtitle": "Connect with professional stylists who understand your hair",
    "cta_primary": "Find Stylists",
    "cta_secondary": "Learn More",
    "features": {
      "title": "Why Choose Strandly?",
      "quality": {
        "title": "Quality Stylists",
        "description": "Verified professionals with expertise in Afro hair care"
      },
      "convenience": {
        "title": "Easy Booking",
        "description": "Book appointments in just 3 simple steps"
      },
      "community": {
        "title": "Trusted Community",
        "description": "Join thousands of satisfied clients across Europe"
      }
    }
  },
  "stylists": {
    "title": "Find Your Stylist",
    "subtitle": "Browse our network of professional Afro hair stylists",
    "search_placeholder": "Search by name, location, or specialty",
    "filter_by": "Filter by",
    "location": "Location",
    "specialty": "Specialty",
    "price_range": "Price Range",
    "availability": "Availability",
    "rating": "Rating",
    "sort_by": "Sort by",
    "sort_options": {
      "rating": "Highest Rated",
      "price_low": "Price: Low to High",
      "price_high": "Price: High to Low",
      "distance": "Distance",
      "availability": "Availability"
    },
    "no_results": "No stylists found",
    "no_results_description": "Try adjusting your search criteria or check back later for new stylists in your area"
  },
  "booking": {
    "title": "Book Appointment",
    "select_service": "Select Service",
    "select_stylist": "Choose Stylist",
    "select_date": "Pick Date & Time",
    "confirm_booking": "Confirm Booking",
    "services": {
      "haircut": "Haircut",
      "styling": "Hair Styling",
      "coloring": "Hair Coloring",
      "treatment": "Hair Treatment",
      "braiding": "Braiding",
      "weaving": "Hair Weaving"
    },
    "form": {
      "name": "Full Name",
      "email": "Email Address",
      "phone": "Phone Number",
      "notes": "Special Requests",
      "notes_placeholder": "Any specific requirements or notes for your stylist"
    },
    "confirmation": {
      "title": "Booking Confirmed!",
      "message": "Your appointment has been successfully booked",
      "details": "Booking Details",
      "stylist": "Stylist",
      "service": "Service",
      "date": "Date",
      "time": "Time",
      "location": "Location"
    }
  },
  "shop": {
    "title": "Hair Care Products",
    "subtitle": "Curated products for Afro hair care",
    "categories": {
      "shampoo": "Shampoo",
      "conditioner": "Conditioner",
      "styling": "Styling Products",
      "treatment": "Hair Treatments",
      "tools": "Hair Tools",
      "accessories": "Accessories"
    },
    "product": {
      "add_to_cart": "Add to Cart",
      "buy_now": "Buy Now",
      "out_of_stock": "Out of Stock",
      "in_stock": "In Stock",
      "rating": "Rating",
      "reviews": "Reviews",
      "description": "Description",
      "ingredients": "Ingredients",
      "how_to_use": "How to Use",
      "size": "Size",
      "color": "Color"
    },
    "cart": {
      "title": "Shopping Cart",
      "empty": "Your cart is empty",
      "empty_description": "Add some products to get started",
      "subtotal": "Subtotal",
      "tax": "Tax",
      "shipping": "Shipping",
      "total": "Total",
      "checkout": "Checkout",
      "continue_shopping": "Continue Shopping"
    }
  },
  "blog": {
    "title": "Hair Care Blog",
    "subtitle": "Tips, trends, and insights for Afro hair care",
    "read_more": "Read More",
    "share": "Share",
    "author": "Author",
    "published": "Published",
    "reading_time": "min read",
    "categories": {
      "tips": "Hair Tips",
      "trends": "Trends",
      "products": "Product Reviews",
      "styling": "Styling Guides",
      "care": "Hair Care"
    }
  },
  "errors": {
    "404": {
      "title": "Page Not Found",
      "message": "The page you're looking for doesn't exist",
      "back_home": "Back to Home"
    },
    "500": {
      "title": "Server Error",
      "message": "Something went wrong on our end",
      "try_again": "Try Again"
    },
    "network": {
      "title": "Connection Error",
      "message": "Please check your internet connection and try again"
    },
    "validation": {
      "required": "This field is required",
      "email": "Please enter a valid email address",
      "phone": "Please enter a valid phone number",
      "min_length": "Must be at least {min} characters",
      "max_length": "Must be no more than {max} characters"
    }
  },
  "forms": {
    "contact": {
      "title": "Get in Touch",
      "name": "Name",
      "email": "Email",
      "subject": "Subject",
      "message": "Message",
      "send": "Send Message",
      "success": "Message sent successfully!",
      "error": "Failed to send message. Please try again."
    },
    "newsletter": {
      "title": "Stay Updated",
      "subtitle": "Get the latest hair care tips and trends",
      "email": "Email Address",
      "subscribe": "Subscribe",
      "success": "Successfully subscribed!",
      "error": "Subscription failed. Please try again."
    }
  }
}
```

### German (de.json)
```json
{
  "common": {
    "loading": "Wird geladen...",
    "error": "Etwas ist schiefgelaufen",
    "retry": "Erneut versuchen",
    "cancel": "Abbrechen",
    "save": "Speichern",
    "delete": "L√∂schen",
    "edit": "Bearbeiten",
    "close": "Schlie√üen",
    "back": "Zur√ºck",
    "next": "Weiter",
    "previous": "Vorherige",
    "search": "Suchen",
    "filter": "Filtern",
    "sort": "Sortieren",
    "clear": "L√∂schen",
    "apply": "Anwenden",
    "confirm": "Best√§tigen",
    "yes": "Ja",
    "no": "Nein"
  },
  "navigation": {
    "home": "Startseite",
    "about": "√úber uns",
    "stylists": "Stylisten finden",
    "bookings": "Meine Termine",
    "shop": "Shop",
    "blog": "Blog",
    "contact": "Kontakt",
    "profile": "Profil",
    "settings": "Einstellungen",
    "logout": "Abmelden"
  },
  "home": {
    "hero_title": "Finden Sie Ihren perfekten Afro-Haar-Stylisten",
    "hero_subtitle": "Verbinden Sie sich mit professionellen Stylisten, die Ihr Haar verstehen",
    "cta_primary": "Stylisten finden",
    "cta_secondary": "Mehr erfahren",
    "features": {
      "title": "Warum Strandly w√§hlen?",
      "quality": {
        "title": "Qualit√§tsstylisten",
        "description": "Verifizierte Fachkr√§fte mit Expertise in der Afro-Haar-Pflege"
      },
      "convenience": {
        "title": "Einfache Buchung",
        "description": "Buchen Sie Termine in nur 3 einfachen Schritten"
      },
      "community": {
        "title": "Vertrauensvolle Gemeinschaft",
        "description": "Schlie√üen Sie sich Tausenden zufriedener Kunden in ganz Europa an"
      }
    }
  }
}
```

## üîß Implementation

### Server Components
```tsx
// app/[locale]/page.tsx
import { getTranslations } from 'next-intl/server';
import { HeroSection } from '@/components/HeroSection';

export default async function HomePage() {
  const t = await getTranslations('home');

  return (
    <main>
      <HeroSection
        title={t('hero_title')}
        subtitle={t('hero_subtitle')}
        ctaPrimary={t('cta_primary')}
        ctaSecondary={t('cta_secondary')}
      />
    </main>
  );
}
```

### Client Components
```tsx
// components/HeroSection.tsx
'use client';

import { useTranslations } from 'next-intl';
import { Button } from '@/components/ui/Button';

interface HeroSectionProps {
  title: string;
  subtitle: string;
  ctaPrimary: string;
  ctaSecondary: string;
}

export const HeroSection: React.FC<HeroSectionProps> = ({
  title,
  subtitle,
  ctaPrimary,
  ctaSecondary,
}) => {
  const t = useTranslations('common');

  return (
    <section className="hero">
      <h1 className="hero-title">{title}</h1>
      <p className="hero-subtitle">{subtitle}</p>
      <div className="hero-actions">
        <Button variant="primary">{ctaPrimary}</Button>
        <Button variant="secondary">{ctaSecondary}</Button>
      </div>
    </section>
  );
};
```

### Dynamic Content Translation
```tsx
// For content from Directus CMS
interface BlogPost {
  id: string;
  title: Record<string, string>; // { en: "Title", de: "Titel" }
  content: Record<string, string>;
  locale: string;
}

// Usage in components
const BlogPost = ({ post, locale }: { post: BlogPost; locale: string }) => {
  return (
    <article>
      <h1>{post.title[locale] || post.title.en}</h1>
      <div dangerouslySetInnerHTML={{ __html: post.content[locale] || post.content.en }} />
    </article>
  );
};
```

## üåê Locale Detection

### Automatic Detection
```typescript
// middleware.ts
import createMiddleware from 'next-intl/middleware';

export default createMiddleware({
  locales: ['en', 'de', 'fr'],
  defaultLocale: 'en',
  localeDetection: true, // Automatically detect from Accept-Language header
});
```

### Manual Locale Switching
```tsx
// components/LocaleSwitcher.tsx
'use client';

import { useRouter, usePathname } from 'next/navigation';
import { useLocale } from 'next-intl';

const LocaleSwitcher = () => {
  const router = useRouter();
  const pathname = usePathname();
  const locale = useLocale();

  const switchLocale = (newLocale: string) => {
    const segments = pathname.split('/');
    segments[1] = newLocale;
    router.push(segments.join('/'));
  };

  return (
    <select value={locale} onChange={(e) => switchLocale(e.target.value)}>
      <option value="en">English</option>
      <option value="de">Deutsch</option>
      <option value="fr">Fran√ßais</option>
    </select>
  );
};
```

## üìÖ Date & Time Localization

### Date Formatting
```tsx
import { useFormatter } from 'next-intl';

const DateDisplay = ({ date }: { date: Date }) => {
  const format = useFormatter();
  
  return (
    <time dateTime={date.toISOString()}>
      {format.dateTime(date, {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
      })}
    </time>
  );
};
```

### Number Formatting
```tsx
import { useFormatter } from 'next-intl';

const PriceDisplay = ({ price }: { price: number }) => {
  const format = useFormatter();
  
  return (
    <span>
      {format.number(price, {
        style: 'currency',
        currency: 'EUR',
      })}
    </span>
  );
};
```

## üîç SEO & Meta Tags

### Dynamic Meta Tags
```tsx
// app/[locale]/layout.tsx
import { getTranslations } from 'next-intl/server';
import { NextIntlClientProvider } from 'next-intl';

export async function generateMetadata({ params }: { params: { locale: string } }) {
  const t = await getTranslations({ locale: params.locale, namespace: 'meta' });

  return {
    title: t('title'),
    description: t('description'),
    openGraph: {
      title: t('og_title'),
      description: t('og_description'),
      locale: params.locale,
    },
  };
}
```

### Sitemap Generation
```typescript
// app/sitemap.ts
import { MetadataRoute } from 'next';
import { locales } from './i18n/config';

export default function sitemap(): MetadataRoute.Sitemap {
  const baseUrl = 'https://strandly.com';
  
  return locales.flatMap((locale) => [
    {
      url: `${baseUrl}/${locale}`,
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1,
    },
    {
      url: `${baseUrl}/${locale}/stylists`,
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 0.8,
    },
    {
      url: `${baseUrl}/${locale}/shop`,
      lastModified: new Date(),
      changeFrequency: 'weekly',
      priority: 0.7,
    },
  ]);
}
```

## üß™ Testing

### Translation Testing
```tsx
// __tests__/i18n.test.tsx
import { render, screen } from '@testing-library/react';
import { NextIntlClientProvider } from 'next-intl';
import { HomePage } from '@/app/[locale]/page';

const messages = {
  home: {
    hero_title: 'Find Your Perfect Afro Hair Stylist',
    hero_subtitle: 'Connect with professional stylists who understand your hair',
  },
};

const renderWithIntl = (component: React.ReactElement, locale = 'en') => {
  return render(
    <NextIntlClientProvider locale={locale} messages={messages}>
      {component}
    </NextIntlClientProvider>
  );
};

describe('Internationalization', () => {
  it('renders English content by default', () => {
    renderWithIntl(<HomePage />);
    expect(screen.getByText('Find Your Perfect Afro Hair Stylist')).toBeInTheDocument();
  });

  it('renders German content when locale is de', () => {
    const germanMessages = {
      home: {
        hero_title: 'Finden Sie Ihren perfekten Afro-Haar-Stylisten',
        hero_subtitle: 'Verbinden Sie sich mit professionellen Stylisten',
      },
    };

    render(
      <NextIntlClientProvider locale="de" messages={germanMessages}>
        <HomePage />
      </NextIntlClientProvider>
    );

    expect(screen.getByText('Finden Sie Ihren perfekten Afro-Haar-Stylisten')).toBeInTheDocument();
  });
});
```

## üöÄ Best Practices

### Translation Keys
- Use **namespaced keys**: `home.hero_title` instead of `heroTitle`
- Keep keys **descriptive**: `booking.confirmation.title` not `bct`
- Use **consistent naming**: `cta_primary`, `cta_secondary` not `button1`, `button2`

### Content Management
- **Separate content from code**: All user-facing text in translation files
- **Use interpolation**: `"welcome_message": "Welcome, {name}!"`
- **Handle pluralization**: Use ICU message format for complex pluralization

### Performance
- **Lazy load translations**: Only load needed locale data
- **Cache translations**: Use Next.js caching for translation files
- **Optimize bundle size**: Tree-shake unused translations

---

This i18n implementation ensures Strandly can effectively serve the diverse European market with localized content and experiences.
